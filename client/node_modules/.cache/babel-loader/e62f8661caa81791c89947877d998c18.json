{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91934\\\\Desktop\\\\Restaurant Project\\\\client\\\\src\\\\Component\\\\MyCompletedBookings.js\";\nimport React, { Component } from 'react';\nimport Navbar2 from './Navbar2';\nimport Footer from './Footer';\nimport { Breadcrumb, Table, Button, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport '../CSS/style.css';\nexport default class MyCompletedBookings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refresh = () => {\n      fetch(`http://localhost:8080/users/${this.state.userId}/completedBookings`).then(resp => {\n        resp.json().then(data => {\n          // console.log(data)\n          this.setState({\n            list: data\n          });\n        });\n      });\n    };\n\n    this.submit = () => {\n      this.state.showtextarea ? this.setState({\n        showtextarea: false\n      }) : this.setState({\n        showtextarea: true\n      });\n    };\n\n    this.handleSubmit = (id, bookingId, message, userId) => {\n      fetch('http://localhost:8080/completedBookings/' + id, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: id,\n          bookingId: bookingId,\n          userId: userId,\n          message: message,\n          feedback: this.state.feedback\n        })\n      }).then(resp => {\n        resp.json().then(result => {\n          console.log(result);\n          alert('Thankyou, Your Feedback has been Submitted');\n          this.refresh();\n        });\n      });\n    };\n\n    this.delete = key => {\n      // console.log(key)\n      fetch('http://localhost:8080/completedBookings/' + key, {\n        method: 'DELETE',\n        // headers: {\n        //     'Content-Type': 'application/json'\n        // },\n        body: JSON.stringify(this.state)\n      }).then(resp => {\n        resp.json().then(result => {\n          // console.log(result)\n          alert('Okay, Your Booking History For This Dining Has Been Deleted!! We Hope For A New Booking Soon..');\n          this.refresh();\n        });\n      });\n    };\n\n    this.state = {\n      list: [],\n      //for all bookings of a user\n      feedback: '',\n      showtextarea: false\n    };\n    this.state.list2 = JSON.parse(localStorage.getItem('login'));\n    this.state.userId = this.state.list2[0].id; //to fetch all bookings for a perticular user session\n\n    fetch(`http://localhost:8080/users/${this.state.userId}/completedBookings`).then(resp => {\n      resp.json().then(data => {\n        this.setState({\n          list: data\n        });\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Navbar2, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(Breadcrumb, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(Breadcrumb.Item, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"bread\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Home\")), React.createElement(Breadcrumb.Item, {\n      href: \"/service\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"bread\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Services\")), React.createElement(Breadcrumb.Item, {\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Data\")), React.createElement(\"div\", {\n      className: \"container form-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header_content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \" My Completed Bookings\")), React.createElement(\"div\", {\n      className: \"card col-md-14\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"mt-2\",\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \" My Booking History \")), React.createElement(\"div\", {\n      className: \"card-body table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, this.state.list ? React.createElement(\"div\", {\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"table\",\n      style: {\n        backgroundColor: \"black\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Operation\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Booking_Id\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Greeting From Restaurant\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Please Provide Your Valuable Feedback\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.state.list.map((item, i) => React.createElement(\"tr\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      onClick: () => this.delete(item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faTrash,\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, item.bookingId), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, item.message), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"Primary button\",\n      style: {\n        textAlign: \"center\",\n        marginLeft: \"21%\",\n        marginTop: \"5%\"\n      },\n      onClick: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Feedback\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), this.state.showtextarea ? React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      placeholder: item.feedback,\n      style: {\n        width: \"100%\",\n        height: \"100px\",\n        color: \"white\",\n        backgroundColor: \"#660000\"\n      },\n      onChange: e => {\n        this.setState({\n          feedback: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"butn\",\n      onClick: this.handleSubmit.bind(this, item.id, item.bookingId, item.message, item.userId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Submit\")) : null)))))) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Please Wait ...\"))))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/91934/Desktop/Restaurant Project/client/src/Component/MyCompletedBookings.js"],"names":["React","Component","Navbar2","Footer","Breadcrumb","Table","Button","Form","FontAwesomeIcon","faTrash","MyCompletedBookings","constructor","props","refresh","fetch","state","userId","then","resp","json","data","setState","list","submit","showtextarea","handleSubmit","id","bookingId","message","method","headers","body","JSON","stringify","feedback","result","console","log","alert","delete","key","list2","parse","localStorage","getItem","render","color","backgroundColor","map","item","i","textAlign","marginLeft","marginTop","width","height","e","target","value","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Navbar2 from './Navbar2'\r\nimport Footer from './Footer'\r\nimport { Breadcrumb, Table, Button, Form } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\r\nimport '../CSS/style.css'\r\n\r\nexport default class MyCompletedBookings extends Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            list:[], //for all bookings of a user\r\n            feedback:'',\r\n            showtextarea: false\r\n        }\r\n        \r\n        this.state.list2= JSON.parse( localStorage.getItem('login'));  \r\n        this.state.userId = this.state.list2[0].id     \r\n        \r\n        \r\n\r\n        //to fetch all bookings for a perticular user session\r\n        fetch(`http://localhost:8080/users/${this.state.userId}/completedBookings`).then((resp) => {\r\n            resp.json().then((data) => {\r\n                this.setState({\r\n                    list:data\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    refresh = () => {\r\n        fetch(`http://localhost:8080/users/${this.state.userId}/completedBookings`).then((resp) => {\r\n            resp.json().then((data) => {\r\n                // console.log(data)\r\n                this.setState({\r\n                    list: data\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    submit = () => {\r\n        this.state.showtextarea ? this.setState({showtextarea: false}) : this.setState({showtextarea: true })\r\n    }\r\n\r\n    handleSubmit = (id, bookingId, message, userId) => {\r\n    \r\n       fetch('http://localhost:8080/completedBookings/'+ id, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({id:id, bookingId:bookingId, userId:userId, message:message, feedback: this.state.feedback})\r\n            }).then((resp) => {\r\n            resp.json().then((result) => {\r\n                 console.log(result)\r\n                alert('Thankyou, Your Feedback has been Submitted')\r\n                this.refresh()\r\n            })\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    delete = (key) => {\r\n        // console.log(key)\r\n        fetch('http://localhost:8080/completedBookings/' + key, {\r\n            method: 'DELETE',\r\n            // headers: {\r\n            //     'Content-Type': 'application/json'\r\n            // },\r\n            body: JSON.stringify(this.state)\r\n        }).then((resp) => {\r\n            resp.json().then((result) => {\r\n                // console.log(result)\r\n                alert('Okay, Your Booking History For This Dining Has Been Deleted!! We Hope For A New Booking Soon..')\r\n                this.refresh()\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n\r\n            <div>\r\n\r\n            <div className=\"main\">\r\n                <Navbar2/>\r\n                <Breadcrumb>\r\n                     <Breadcrumb.Item href=\"/\"><h5 className=\"bread\">Home</h5></Breadcrumb.Item>\r\n                        <Breadcrumb.Item href=\"/service\">\r\n                            <h5 className=\"bread\">Services</h5>\r\n                        </Breadcrumb.Item>\r\n                    <Breadcrumb.Item active>Data</Breadcrumb.Item>\r\n                </Breadcrumb>\r\n\r\n                <div className=\"container form-content\">\t\t\r\n                    <div className=\"header_content\">\r\n                        <h2> My Completed Bookings</h2>\r\n                    </div>\r\n                    \r\n                    <div className=\"card col-md-14\">\r\n                        <div className=\"card-header\">\r\n                            <h3 className=\"mt-2\" style={{color:\"red\"}}> My Booking History </h3>\r\n                        </div>\r\n                        <div className=\"card-body table\">\r\n                            <div >\r\n                                \r\n                                 {\r\n                                     this.state.list ?\r\n                                     <div className=\"table\">\r\n                                         <Table striped bordered hover className=\"table\">\r\n                                             <thead className=\"table\" style={{backgroundColor:\"black\", color:\"white\"}}>\r\n                                                 <tr>\r\n                                                     <th>Operation</th>\r\n                                                     <th>Booking_Id</th>\r\n                                                     <th>Greeting From Restaurant</th>\r\n                                                     <th>Please Provide Your Valuable Feedback</th>\r\n                                                 </tr>\r\n                                             </thead>\r\n                                             <tbody>\r\n                                                 {\r\n                                                     this.state.list.map((item, i) =>\r\n                                                         <tr key={i}>\r\n                                                             <td>\r\n                                                                 <span onClick={() => this.delete(item.id)}><FontAwesomeIcon icon={faTrash} color='red'/></span>\r\n                                                                 {/* onClick={this.deleteHandler.bind(this, item.id) */}\r\n                                                             </td>\r\n                                                             <td>{item.bookingId}</td>\r\n                                                             <td>{item.message}</td>\r\n                                                             <td>\r\n                                                             <Button className=\"Primary button\" style={{textAlign:\"center\", marginLeft:\"21%\", marginTop:\"5%\"}} onClick={this.submit}>Feedback</Button>\r\n                                                             <br/>\r\n                                                             {this.state.showtextarea?(\r\n                                                                <Form>\r\n                                                                    <br/>\r\n                                                                    <textarea placeholder={item.feedback} style={{width:\"100%\",height:\"100px\", color:\"white\", backgroundColor:\"#660000\"}} onChange={(e)=>{this.setState({feedback: e.target.value})}}></textarea>\r\n                                                                    <button className=\"butn\" onClick={this.handleSubmit.bind(this, item.id, item.bookingId, item.message, item.userId)}>Submit</button>\r\n                                                                </Form>\r\n                                                                ):null\r\n                                                              }\r\n\r\n                                                             </td>\r\n                                                         </tr>\r\n                                                     )\r\n                                                 }\r\n                                             </tbody>\r\n                                         </Table>\r\n                                     </div>\r\n                                     :\r\n                                     <p>Please Wait ...</p>\r\n                                 }                     \r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n        <Footer/>\r\n        </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}